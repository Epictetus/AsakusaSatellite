.message{:target => message.id , :class => defined?(cssclass) && cssclass }
 %div
  - unless message.user.profile_image_url.empty?
   %img.profile{:src => message.user.profile_image_url, :alt => message.user.screen_name}
  %span.screen-name= message.user.screen_name
  %span.user-name= message.user.name
  .update-time
   %span.edit-icons
    = image_tag("message_edit.gif", :class=>'edit', :alt => t(:edit_this_message), :title => t(:edit_this_message))
    = form_tag("TODO", {:onsubmit => "return confirm('#{t(:are_you_sure_you_want_to_delete_this_message)}');", :action => :post, :class => 'delete-form'}) do
     = image_submit_tag "message_delete.gif", :alt => t(:delete_this_message), :title => t(:delete_this_message)
   %a{:href => message_url(:id => message.id, :only_path=>true) }= l(message.created_at)
  %div.body{ :original => message.body, :id => message.id }
   :plain
    #{message.html_body}
 - unless message.attachment.nil?
  %p.attachment
   %a{:target => "_blank", :href => root_path + "upload/" + File.basename(message.attachment.disk_filename) }
    - if image_mimetype?(message.attachment.mimetype)
     %img{:src => root_path + "upload/" + File.basename(message.attachment.disk_filename)}
    - else
     = message.filename
